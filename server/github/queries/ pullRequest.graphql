query getPRs($query: String!) {
  search(query: $query, type: ISSUE, first: 50) {
    issueCount
    pageInfo {
      endCursor
      startCursor
    }
    edges {
      node {
        ...PullRequestInformation
      }
    }
  }
}

query getPR($name: String!, $number: Int!) {
  repository(owner: "shopware", name: $name) {
     pullRequest(number: $number) {
       ...PullRequestInformation
     }
  }
}

query getPullRequestCommits($name: String!, $number: Int!) {
  repository(owner: "shopware", name: $name) {
     pullRequest(number: $number) {
       baseRefOid
       commits {
         totalCount
       }
     }
  }
} 

fragment PullRequestInformation on PullRequest {
  url
  title
  createdAt
  lastEditedAt
  author {
    login
  }
  comments {
    totalCount
  }
  repository {
    id
    name
  }
  timelineItems(last: 20) {
    edges {
      node {
        ... on IssueComment {
          __typename
          author {
            login
          }
        }
        ... on PullRequestCommit {
          __typename
          commit {
            authoredDate
            author {
              user {
                login
              }
            }
          }
        }
        ... on HeadRefForcePushedEvent {
          __typename
          createdAt
          actor {
            login
          }
        }
        ... on RenamedTitleEvent {
          __typename
          actor {
            login
          }
        }
        ... on PullRequestCommitCommentThread {
          __typename
          comments(last: 10) {
            edges {
              node {
                updatedAt
                author {
                  login
                }
              }
            }
          }
        }
        ... on PullRequestReview {
          __typename
          updatedAt
          author {
            login
          }
        }
        ... on PullRequestReviewThread {
          __typename
          comments(last: 10) {
            totalCount
            edges {
              node {
                ... on PullRequestReviewComment {
                  updatedAt
                  author {
                    login
                  }
                }
              }
            }
          }
        }
        ... on LabeledEvent {
          __typename
          actor {
            login
          }
        }
        ... on UnlabeledEvent {
          __typename
          actor {
            login
          }
        }
        ... on AssignedEvent {
          __typename
          actor {
            login
          }
        }
        ... on UnassignedEvent {
          __typename
          createdAt
          actor {
            login
          }
        }
        ... on ConvertToDraftEvent {
          __typename
          actor {
            login
          }
        }
      }
    }
  }
  assignees(last: 5) {
    edges {
      node {
        login
        avatarUrl
      }
    }
  }
  state
  labels(first: 6) {
    edges {
      node {
        id
        name
        color
      }
    }
  }
}

fragment RateLimitInfo on RateLimit {
  cost
  used
  remaining
  nodeCount 
}
